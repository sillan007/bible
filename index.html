<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>365 성경 통독 앱</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com');
        body { font-family: 'Noto Serif KR', serif; line-height: 1.8; background-color: #f8fafc; }
        .verse-num { color: #3b82f6; font-weight: bold; font-size: 0.85em; margin-right: 8px; }
        .chapter-head { background: #f1f5f9; padding: 15px; border-radius: 10px; font-weight: bold; margin: 25px 0 15px; color: #1e40af; border-left: 5px solid #3b82f6; font-size: 1.25rem; }
        .calendar-day.read { background-color: #22c55e !important; color: white !important; border-color: #16a34a !important; font-weight: bold; }
    </style>
</head>
<div class="flex gap-2 mb-2 justify-end">
    <button onclick="changeFontSize(-2)" class="px-3 py-1 bg-slate-100 rounded border text-sm font-bold">- 가</button>
    <button onclick="changeFontSize(2)" class="px-3 py-1 bg-slate-100 rounded border text-sm font-bold">+ 가</button>
</div>
<body class="text-slate-800">
    <div class="max-w-md mx-auto min-h-screen flex flex-col bg-white shadow-2xl">
        
        <!-- 상단 헤더 -->
        <header class="p-5 border-b sticky top-0 bg-white/95 backdrop-blur-sm z-50">
            <div class="flex justify-between items-center text-sm mb-1 font-sans">
                <span id="header-date" class="text-blue-600 font-bold">오늘의 통독</span>
                <span id="header-status" class="px-2 py-0.5 rounded-full bg-slate-200 text-slate-600 text-xs">미독</span>
            </div>
            <h1 id="header-title" class="text-2xl font-black mb-3">말씀을 불러오는 중...</h1>
            <div class="w-full bg-slate-200 h-1.5 rounded-full overflow-hidden">
                <div id="header-progress" class="bg-blue-500 h-full transition-all duration-1000" style="width: 0%"></div>
            </div>
        </header>

        <!-- 메뉴 및 선택창 -->
        <nav class="bg-slate-50 border-b p-3 space-y-2">
            <div class="flex gap-2">
                <button onclick="loadToday()" class="flex-1 py-2 bg-white border border-slate-200 rounded-lg text-xs font-bold hover:bg-blue-50">오늘의 통독</button>
                <button onclick="toggleCalendar()" class="flex-1 py-2 bg-white border border-slate-200 rounded-lg text-xs font-bold hover:bg-blue-50">기록 달력</button>
            </div>
            <div class="flex gap-1">
                <select id="book-select" onchange="updateChapterList()" class="flex-[2] p-2 border rounded-lg text-sm bg-white outline-none focus:border-blue-500">
                    <option value="">성경 선택</option>
                    <option value="창세기" data-abbr="창" data-max="50">창세기</option>
	      <option value="출애굽기" data-abbr="출" data-max="40">출애굽기</option>
	      <option value="레위기" data-abbr="레" data-max="27">레위기</option>	
                    <option value="민수기" data-abbr="민" data-max="36">민수기</option>
 	<option value="신명기" data-abbr="신" data-max="34">신명기</option>
 	<option value="여호수아" data-abbr="수" data-max="24">여호수아</option>
	 <option value="사사기" data-abbr="삿" data-max="21">사사기</option>
	 <option value="룻기" data-abbr="룻" data-max="4">룻기</option>
	 <option value="사무엘상" data-abbr="삼상" data-max="31">사무엘상</option>
	 <option value="사무엘하" data-abbr="삼하" data-max="24">사무엘하</option>
	 <option value="열왕기상" data-abbr="왕상" data-max="22">열왕기상</option>
 	<option value="열왕기하" data-abbr="왕하" data-max="25">열왕기하</option>
 	<option value="역대상" data-abbr="대상" data-max="29">역대상</option>
	 <option value="역대하" data-abbr="대하" data-max="36">역대하</option>
	 <option value="에스라" data-abbr="스" data-max="10">에스라</option>
 	<option value="느헤미야" data-abbr="느" data-max="13">느헤미야</option>
 	<option value="에스더" data-abbr="에" data-max="10">에스더</option>
 	<option value="욥기" data-abbr="욥" data-max="42">욥기</option>
	 <option value="시편" data-abbr="시" data-max="150">시편</option>
 	<option value="잠언" data-abbr="잠" data-max="31">잠언</option>
 	<option value="전도서" data-abbr="전" data-max="12">전도서</option>
 	<option value="아가" data-abbr="아" data-max="8">아가</option>
 	<option value="이사야" data-abbr="사" data-max="66">이사야</option>
 	<option value="예레미야" data-abbr="렘" data-max="52">예레미야</option>
 	<option value="예레미야애가" data-abbr="애" data-max="5">예레미야애가</option>
	 <option value="에스겔" data-abbr="겔" data-max="48">에스겔</option>
	 <option value="다니엘" data-abbr="단" data-max="12">다니엘</option>
	 <option value="호세아" data-abbr="호" data-max="14">호세아</option>
	 <option value="요엘" data-abbr="욜" data-max="3">요엘</option>
	 <option value="아모스" data-abbr="암" data-max="9">아모스</option>
 	<option value="오바댜" data-abbr="옵" data-max="1">오바댜</option>
 	<option value="요나" data-abbr="욘" data-max="4">요나</option>
 	<option value="미가" data-abbr="미" data-max="7">미가</option>
 	<option value="나훔" data-abbr="나" data-max="3">나훔</option>
	 <option value="하박국" data-abbr="합" data-max="3">하박국</option>
 	<option value="스바냐" data-abbr="습" data-max="3">스바냐</option>
 	<option value="학개" data-abbr="학" data-max="2">학개</option>
 	<option value="스가랴" data-abbr="슥" data-max="11">스가랴</option>
 	<option value="말라기" data-abbr="말" data-max="4">말라기</option>
 	<option value="마태복음" data-abbr="마" data-max="28">마태복음</option>
 	<option value="마가복음" data-abbr="막" data-max="16">마가복음</option>
 	<option value="누가복음" data-abbr="눅" data-max="24">누가복음</option>
 	<option value="요한복음" data-abbr="요" data-max="21">요한복음</option>
 	<option value="사도행전" data-abbr="행" data-max="28">사도행전</option>
 	<option value="로마서" data-abbr="롬" data-max="16">로마서</option>
 	<option value="고린도전서" data-abbr="고전" data-max="16">고린도전서</option>
 	<option value="고린도후서" data-abbr="고후" data-max="13">고린도후서</option>
 	<option value="갈라디아서" data-abbr="갈" data-max="6">갈라디아서</option>
 	<option value="에베소서" data-abbr="엡" data-max="6">에베소서</option>
 	<option value="빌립보서" data-abbr="빌" data-max="4">빌립보서</option>
 	<option value="골로새서" data-abbr="골" data-max="4">골로새서</option>
 	<option value="데살로니가전서" data-abbr="살전" data-max="5">데살로니가전서</option>
	 <option value="데살로니가후서" data-abbr="살후" data-max="3">데살로니가후서</option>
	 <option value="디모데전서" data-abbr="딤전" data-max="6">디모데전서</option>
 	<option value="디모데후서" data-abbr="딤후" data-max="4">디모데후서</option>
 	<option value="디도서" data-abbr="딛" data-max="3">디도서</option>
 	<option value="빌레몬서" data-abbr="몬" data-max="1">빌레몬서</option>
	 <option value="히브리서" data-abbr="히" data-max="13">히브리서</option>
 	<option value="야고보서" data-abbr="약" data-max="5">야고보서</option>
 	<option value="베드로전서" data-abbr="벧전" data-max="5">베드로전서</option>
	 <option value="베드로후서" data-abbr="벧후" data-max="3">베드로후서</option>
 	<option value="요한일서" data-abbr="요일" data-max="5">요한일서</option>
 	<option value="요한이서" data-abbr="요이" data-max="1">요한이서</option>
	 <option value="요한삼서" data-abbr="요삼" data-max="1">요한삼서</option>
	 <option value="유다서" data-abbr="유" data-max="1">유다서</option>
 	<option value="요한계시록" data-abbr="계" data-max="22">요한계시록</option>
                </select>
                <select id="chapter-select" class="flex-1 p-2 border rounded-lg text-sm bg-white outline-none">
                    <option value="">장</option>
                </select>
                <button onclick="loadManual()" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-bold active:scale-95 transition-transform">이동</button>
            </div>
        </nav>

        <!-- 달력 (기본 숨김) -->
        <div id="calendar-view" class="hidden p-4 bg-white border-b shadow-inner">
            <div class="flex justify-between items-center mb-3">
                <h3 class="font-bold text-sm text-slate-700">월별 기록 확인</h3>
                <select id="calendar-month" onchange="renderCalendar()" class="text-sm border rounded p-1">
                    	<option value="01">1월</option>
	      	<option value="02">2월</option>
                    	<option value="03">3월</option>
 	      	<option value="04">4월</option>
 	     	<option value="05">5월</option>
	 	<option value="06">6월</option>
 		<option value="07">7월</option>
	 	<option value="08">8월</option>
 		<option value="09">9월</option>
 		<option value="10">10월</option>
	 	<option value="11">11월</option>
 		<option value="12">12월</option>
                </select>
            </div>
            <div id="calendar-grid" class="grid grid-cols-7 gap-1.5"></div>
        </div>

        <!-- 본문 뷰어 -->
        <main id="bible-viewer" class="flex-1 p-6 overflow-y-auto text-lg leading-relaxed"></main>

        <!-- 읽기 완료 버튼 -->
        <footer class="p-4 border-t bg-slate-50 sticky bottom-0 z-40">
            <button id="read-btn" onclick="toggleReadStatus()" class="w-full py-4 rounded-2xl font-bold text-white shadow-lg bg-blue-600 transition-all active:scale-95">
                오늘의 읽기 완료
            </button>
        </footer>
    </div>

    <script>
        // 1. 일독표 데이터 (날짜별 범위)
        const planData = {
  "01-01": { "book": "창세기", "abbr": "창", "start": 1, "end": 3 },
"01-02": { "book": "창세기", "abbr": "창", "start": 4, "end": 6 },
"01-03": { "book": "창세기", "abbr": "창", "start": 7, "end": 9 },
"01-04": { "book": "창세기", "abbr": "창", "start": 10, "end": 13 },
"01-05": { "book": "창세기", "abbr": "창", "start": 14, "end": 17 },
"01-06": { "book": "창세기", "abbr": "창", "start": 18, "end": 20 },
"01-07": { "book": "창세기", "abbr": "창", "start": 21, "end": 23 },
"01-08": { "book": "창세기", "abbr": "창", "start": 24, "end": 25 },
"01-09": { "book": "창세기", "abbr": "창", "start": 26, "end": 27 },
"01-10": { "book": "창세기", "abbr": "창", "start": 28, "end": 30 },
"01-11": { "book": "창세기", "abbr": "창", "start": 31, "end": 32 },
"01-12": { "book": "창세기", "abbr": "창", "start": 33, "end": 36 },
"01-13": { "book": "창세기", "abbr": "창", "start": 37, "end": 39 },
"01-14": { "book": "창세기", "abbr": "창", "start": 40, "end": 42 },
"01-15": { "book": "창세기", "abbr": "창", "start": 43, "end": 45 },
"01-16": { "book": "창세기", "abbr": "창", "start": 46, "end": 48 },
"01-17": { "book": "창세기", "abbr": "창", "start": 49, "end": 50 },
"01-18": { "book": "출애굽기", "abbr": "출", "start": 1, "end": 3 },
"01-19": { "book": "출애굽기", "abbr": "출", "start": 4, "end": 6 },
"01-20": { "book": "출애굽기", "abbr": "출", "start": 7, "end": 9 },
"01-21": { "book": "출애굽기", "abbr": "출", "start": 10, "end": 12 },
"01-22": { "book": "출애굽기", "abbr": "출", "start": 13, "end": 15 },
"01-23": { "book": "출애굽기", "abbr": "출", "start": 16, "end": 18 },
"01-24": { "book": "출애굽기", "abbr": "출", "start": 19, "end": 21 },
"01-25": { "book": "출애굽기", "abbr": "출", "start": 22, "end": 24 },
"01-26": { "book": "출애굽기", "abbr": "출", "start": 25, "end": 26 },
"01-27": { "book": "출애굽기", "abbr": "출", "start": 27, "end": 29 },
"01-28": { "book": "출애굽기", "abbr": "출", "start": 30, "end": 32 },
"01-29": { "book": "출애굽기", "abbr": "출", "start": 33, "end": 35 },
"01-30": { "book": "출애굽기", "abbr": "출", "start": 36, "end": 38 },
"01-31": { "book": "출애굽기", "abbr": "출", "start": 39, "end": 40 },
"02-01": { "book": "레위기", "abbr": "레", "start": 1, "end": 4 },
"02-02": { "book": "레위기", "abbr": "레", "start": 5, "end": 7 },
"02-03": { "book": "레위기", "abbr": "레", "start": 8, "end": 10 },
"02-04": { "book": "레위기", "abbr": "레", "start": 11, "end": 13 },
"02-05": { "book": "레위기", "abbr": "레", "start": 14, "end": 15 },
"02-06": { "book": "레위기", "abbr": "레", "start": 16, "end": 18 },
"02-07": { "book": "레위기", "abbr": "레", "start": 19, "end": 21 },
"02-08": { "book": "레위기", "abbr": "레", "start": 22, "end": 24 },
"02-09": { "book": "레위기", "abbr": "레", "start": 25, "end": 27 },
"02-10": { "book": "민수기", "abbr": "민", "start": 1, "end": 3 },
"02-11": { "book": "민수기", "abbr": "민", "start": 4, "end": 6 },
"02-12": { "book": "민수기", "abbr": "민", "start": 7, "end": 9 },
"02-13": { "book": "민수기", "abbr": "민", "start": 10, "end": 12 },
"02-14": { "book": "민수기", "abbr": "민", "start": 13, "end": 15 },
"02-15": { "book": "민수기", "abbr": "민", "start": 16, "end": 18 },
"02-16": { "book": "민수기", "abbr": "민", "start": 19, "end": 21 },
"02-17": { "book": "민수기", "abbr": "민", "start": 22, "end": 24 },
"02-18": { "book": "민수기", "abbr": "민", "start": 25, "end": 27 },
"02-19": { "book": "민수기", "abbr": "민", "start": 28, "end": 30 },
"02-20": { "book": "민수기", "abbr": "민", "start": 31, "end": 33 },
"02-21": { "book": "민수기", "abbr": "민", "start": 34, "end": 36 },
"02-22": { "book": "신명기", "abbr": "신", "start": 1, "end": 3 },
"02-23": { "book": "신명기", "abbr": "신", "start": 4, "end": 6 },
"02-24": { "book": "신명기", "abbr": "신", "start": 7, "end": 9 },
"02-25": { "book": "신명기", "abbr": "신", "start": 10, "end": 12 },
"02-26": { "book": "신명기", "abbr": "신", "start": 13, "end": 15 },
"02-27": { "book": "신명기", "abbr": "신", "start": 16, "end": 18 },
"02-28": { "book": "신명기", "abbr": "신", "start": 19, "end": 21 },
"03-01": { "book": "신명기", "abbr": "신", "start": 22, "end": 24 },
"03-02": { "book": "신명기", "abbr": "신", "start": 25, "end": 27 },
"03-03": { "book": "신명기", "abbr": "신", "start": 28, "end": 28 },
"03-04": { "book": "신명기", "abbr": "신", "start": 29, "end": 31 },
"03-05": { "book": "신명기", "abbr": "신", "start": 32, "end": 28 },
"03-06": { "book": "신명기", "abbr": "신", "start": 33, "end": 34 },
"03-07": { "book": "여호수아", "abbr": "수", "start": 1, "end": 4 },
"03-08": { "book": "여호수아", "abbr": "수", "start": 5, "end": 7 },
"03-09": { "book": "여호수아", "abbr": "수", "start": 8, "end": 9 },
"03-10": { "book": "여호수아", "abbr": "수", "start": 10, "end": 11 },
"03-11": { "book": "여호수아", "abbr": "수", "start": 12, "end": 14 },
"03-12": { "book": "여호수아", "abbr": "수", "start": 15, "end": 17 },
"03-13": { "book": "여호수아", "abbr": "수", "start": 18, "end": 20 },
"03-14": { "book": "여호수아", "abbr": "수", "start": 21, "end": 22 },
"03-15": { "book": "여호수아", "abbr": "수", "start": 23, "end": 24 },
"03-16": { "book": "사사기", "abbr": "삿", "start": 1, "end": 2 },
"03-17": { "book": "사사기", "abbr": "삿", "start": 3, "end": 4 },
"03-18": { "book": "사사기", "abbr": "삿", "start": 5, "end": 6 },
"03-19": { "book": "사사기", "abbr": "삿", "start": 7, "end": 8 },
"03-20": { "book": "사사기", "abbr": "삿", "start": 9, "end": 10 },
"03-21": { "book": "사사기", "abbr": "삿", "start": 11, "end": 13 },
"03-22": { "book": "사사기", "abbr": "삿", "start": 14, "end": 16 },
"03-23": { "book": "사사기", "abbr": "삿", "start": 17, "end": 19 },
"03-24": { "book": "사사기", "abbr": "삿", "start": 20, "end": 21 },
"03-25": { "book": "룻기", "abbr": "룻", "start": 1, "end": 4 },
"03-26": { "book": "사무엘상", "abbr": "삼상", "start": 1, "end": 2 },
"03-27": { "book": "사무엘상", "abbr": "삼상", "start": 3, "end": 6 },
"03-28": { "book": "사무엘상", "abbr": "삼상", "start": 7, "end": 9 },
"03-29": { "book": "사무엘상", "abbr": "삼상", "start": 10, "end": 12 },
"03-30": { "book": "사무엘상", "abbr": "삼상", "start": 13, "end": 14 },
"03-31": { "book": "사무엘상", "abbr": "삼상", "start": 15, "end": 16 },
"04-01": { "book": "사무엘상", "abbr": "삼상", "start": 17, "end": 18 },
"04-02": { "book": "사무엘상", "abbr": "삼상", "start": 19, "end": 20 },
"04-03": { "book": "사무엘상", "abbr": "삼상", "start": 21, "end": 23 },
"04-04": { "book": "사무엘상", "abbr": "삼상", "start": 24, "end": 25 },
"04-05": { "book": "사무엘상", "abbr": "삼상", "start": 26, "end": 28 },
"04-06": { "book": "사무엘상", "abbr": "삼상", "start": 29, "end": 31 },
"04-07": { "book": "사무엘하", "abbr": "삼하", "start": 1, "end": 3 },
"04-08": { "book": "사무엘하", "abbr": "삼하", "start": 4, "end": 7 },
"04-09": { "book": "사무엘하", "abbr": "삼하", "start": 8, "end": 11 },
"04-10": { "book": "사무엘하", "abbr": "삼하", "start": 12, "end": 13 },
"04-11": { "book": "사무엘하", "abbr": "삼하", "start": 14, "end": 15 },
"04-12": { "book": "사무엘하", "abbr": "삼하", "start": 16, "end": 18 },
"04-13": { "book": "사무엘하", "abbr": "삼하", "start": 19, "end": 21 },
"04-14": { "book": "사무엘하", "abbr": "삼하", "start": 22, "end": 24 },
"04-15": { "book": "열왕기상", "abbr": "왕상", "start": 1, "end": 3 },
"04-16": { "book": "열왕기상", "abbr": "왕상", "start": 4, "end": 6 },
"04-17": { "book": "열왕기상", "abbr": "왕상", "start": 7, "end": 9 },
"04-18": { "book": "열왕기상", "abbr": "왕상", "start": 10, "end": 12 },
"04-19": { "book": "열왕기상", "abbr": "왕상", "start": 13, "end": 14 },
"04-20": { "book": "열왕기상", "abbr": "왕상", "start": 15, "end": 17 },
"04-21": { "book": "열왕기상", "abbr": "왕상", "start": 18, "end": 20 },
"04-22": { "book": "열왕기상", "abbr": "왕상", "start": 21, "end": 22 },
"04-23": { "book": "열왕기하", "abbr": "왕하", "start": 1, "end": 3 },
"04-24": { "book": "열왕기하", "abbr": "왕하", "start": 4, "end": 6 },
"04-25": { "book": "열왕기하", "abbr": "왕하", "start": 7, "end": 9 },
"04-26": { "book": "열왕기하", "abbr": "왕하", "start": 10, "end": 12 },
"04-27": { "book": "열왕기하", "abbr": "왕하", "start": 13, "end": 15 },
"04-28": { "book": "열왕기하", "abbr": "왕하", "start": 16, "end": 18 },
"04-29": { "book": "열왕기하", "abbr": "왕하", "start": 19, "end": 22 },
"04-30": { "book": "열왕기하", "abbr": "왕하", "start": 23, "end": 25 },
"05-01": { "book": "역대상", "abbr": "대상", "start": 1, "end": 3 },
"05-02": { "book": "역대상", "abbr": "대상", "start": 4, "end": 6 },
"05-03": { "book": "역대상", "abbr": "대상", "start": 7, "end": 10 },
"05-04": { "book": "역대상", "abbr": "대상", "start": 11, "end": 13 },
"05-05": { "book": "역대상", "abbr": "대상", "start": 14, "end": 17 },
"05-06": { "book": "역대상", "abbr": "대상", "start": 18, "end": 21 },
"05-07": { "book": "역대상", "abbr": "대상", "start": 22, "end": 24 },
"05-08": { "book": "역대상", "abbr": "대상", "start": 25, "end": 27 },
"05-09": { "book": "역대상", "abbr": "대상", "start": 28, "end": 29 },
"05-10": { "book": "역대하", "abbr": "대하", "start": 1, "end": 4 },
"05-11": { "book": "역대하", "abbr": "대하", "start": 5, "end": 8 },
"05-12": { "book": "역대하", "abbr": "대하", "start": 9, "end": 12 },
"05-13": { "book": "역대하", "abbr": "대하", "start": 13, "end": 16 },
"05-14": { "book": "역대하", "abbr": "대하", "start": 17, "end": 20 },
"05-15": { "book": "역대하", "abbr": "대하", "start": 21, "end": 24 },
"05-16": { "book": "역대하", "abbr": "대하", "start": 25, "end": 28 },
"05-17": { "book": "역대하", "abbr": "대하", "start": 29, "end": 32 },
"05-18": { "book": "역대하", "abbr": "대하", "start": 33, "end": 36 },
"05-19": { "book": "에스라", "abbr": "스", "start": 1, "end": 3 },
"05-20": { "book": "에스라", "abbr": "스", "start": 4, "end": 6 },
"05-21": { "book": "에스라", "abbr": "스", "start": 7, "end": 10 },
"05-22": { "book": "느헤미야", "abbr": "느", "start": 1, "end": 4 },
"05-23": { "book": "느헤미야", "abbr": "느", "start": 5, "end": 8 },
"05-24": { "book": "느헤미야", "abbr": "느", "start": 9, "end": 13 },
"05-25": { "book": "에스더", "abbr": "에", "start": 1, "end": 3 },
"05-26": { "book": "에스더", "abbr": "에", "start": 4, "end": 6 },
"05-27": { "book": "에스더", "abbr": "에", "start": 7, "end": 10 },
"05-28": { "book": "욥기", "abbr": "욥", "start": 1, "end": 6 },
"05-29": { "book": "욥기", "abbr": "욥", "start": 7, "end": 12 },
"05-30": { "book": "욥기", "abbr": "욥", "start": 13, "end": 18 },
"05-31": { "book": "욥기", "abbr": "욥", "start": 19, "end": 24 },
"06-01": { "book": "욥기", "abbr": "욥", "start": 25, "end": 30 },
"06-02": { "book": "욥기", "abbr": "욥", "start": 31, "end": 35 },
"06-03": { "book": "욥기", "abbr": "욥", "start": 36, "end": 39 },
"06-04": { "book": "욥기", "abbr": "욥", "start": 40, "end": 42 },
"06-05": { "book": "시편", "abbr": "시", "start": 1, "end": 5 },
"06-06": { "book": "시편", "abbr": "시", "start": 6, "end": 10 },
"06-07": { "book": "시편", "abbr": "시", "start": 11, "end": 14 },
"06-08": { "book": "시편", "abbr": "시", "start": 15, "end": 21 },
"06-09": { "book": "시편", "abbr": "시", "start": 22, "end": 27 },
"06-10": { "book": "시편", "abbr": "시", "start": 28, "end": 35 },
"06-11": { "book": "시편", "abbr": "시", "start": 36, "end": 42 },
"06-12": { "book": "시편", "abbr": "시", "start": 43, "end": 49 },
"06-13": { "book": "시편", "abbr": "시", "start": 50, "end": 56 },
"06-14": { "book": "시편", "abbr": "시", "start": 57, "end": 62 },
"06-15": { "book": "시편", "abbr": "시", "start": 63, "end": 68 },
"06-16": { "book": "시편", "abbr": "시", "start": 69, "end": 73 },
"06-17": { "book": "시편", "abbr": "시", "start": 74, "end": 78 },
"06-18": { "book": "시편", "abbr": "시", "start": 79, "end": 84 },
"06-19": { "book": "시편", "abbr": "시", "start": 85, "end": 91 },
"06-20": { "book": "시편", "abbr": "시", "start": 92, "end": 98 },
"06-21": { "book": "시편", "abbr": "시", "start": 99, "end": 105 },
"06-22": { "book": "시편", "abbr": "시", "start": 106, "end": 112 },
"06-23": { "book": "시편", "abbr": "시", "start": 113, "end": 118 },
"06-24": { "book": "시편", "abbr": "시", "start": 119, "end": 119 },
"06-25": { "book": "시편", "abbr": "시", "start": 120, "end": 124 },
"06-26": { "book": "시편", "abbr": "시", "start": 125, "end": 129 },
"06-27": { "book": "시편", "abbr": "시", "start": 130, "end": 134 },
"06-28": { "book": "시편", "abbr": "시", "start": 135, "end": 139 },
"06-29": { "book": "시편", "abbr": "시", "start": 140, "end": 144 },
"06-30": { "book": "시편", "abbr": "시", "start": 145, "end": 150 },
"07-01": { "book": "잠언", "abbr": "잠", "start": 1, "end": 4 },
"07-02": { "book": "잠언", "abbr": "잠", "start": 5, "end": 9 },
"07-03": { "book": "잠언", "abbr": "잠", "start": 10, "end": 14 },
"07-04": { "book": "잠언", "abbr": "잠", "start": 15, "end": 19 },
"07-05": { "book": "잠언", "abbr": "잠", "start": 20, "end": 24 },
"07-06": { "book": "잠언", "abbr": "잠", "start": 25, "end": 31 },
"07-07": { "book": "전도서", "abbr": "전", "start": 1, "end": 6 },
"07-08": { "book": "전도서", "abbr": "전", "start": 7, "end": 12 },
"07-09": { "book": "아가", "abbr": "아", "start": 1, "end": 4 },
"07-10": { "book": "아가", "abbr": "아", "start": 5, "end": 8 },
"07-11": { "book": "이사야", "abbr": "사", "start": 1, "end": 3 },
"07-12": { "book": "이사야", "abbr": "사", "start": 4, "end": 6 },
"07-13": { "book": "이사야", "abbr": "사", "start": 7, "end": 9 },
"07-14": { "book": "이사야", "abbr": "사", "start": 10, "end": 13 },
"07-15": { "book": "이사야", "abbr": "사", "start": 14, "end": 16 },
"07-16": { "book": "이사야", "abbr": "사", "start": 17, "end": 19 },
"07-17": { "book": "이사야", "abbr": "사", "start": 20, "end": 22 },
"07-18": { "book": "이사야", "abbr": "사", "start": 23, "end": 25 },
"07-19": { "book": "이사야", "abbr": "사", "start": 26, "end": 28 },
"07-20": { "book": "이사야", "abbr": "사", "start": 29, "end": 31 },
"07-21": { "book": "이사야", "abbr": "사", "start": 32, "end": 35 },
"07-22": { "book": "이사야", "abbr": "사", "start": 36, "end": 38 },
"07-23": { "book": "이사야", "abbr": "사", "start": 39, "end": 41 },
"07-24": { "book": "이사야", "abbr": "사", "start": 42, "end": 44 },
"07-25": { "book": "이사야", "abbr": "사", "start": 45, "end": 47 },
"07-26": { "book": "이사야", "abbr": "사", "start": 48, "end": 50 },
"07-27": { "book": "이사야", "abbr": "사", "start": 51, "end": 53 },
"07-28": { "book": "이사야", "abbr": "사", "start": 54, "end": 56 },
"07-29": { "book": "이사야", "abbr": "사", "start": 57, "end": 59 },
"07-30": { "book": "이사야", "abbr": "사", "start": 60, "end": 63 },
"07-31": { "book": "이사야", "abbr": "사", "start": 64, "end": 66 },
"08-01": { "book": "예레미야", "abbr": "렘", "start": 1, "end": 3 },
"08-02": { "book": "예레미야", "abbr": "렘", "start": 4, "end": 6 },
"08-03": { "book": "예레미야", "abbr": "렘", "start": 7, "end": 9 },
"08-04": { "book": "예레미야", "abbr": "렘", "start": 10, "end": 12 },
"08-05": { "book": "예레미야", "abbr": "렘", "start": 13, "end": 15 },
"08-06": { "book": "예레미야", "abbr": "렘", "start": 16, "end": 18 },
"08-07": { "book": "예레미야", "abbr": "렘", "start": 19, "end": 21 },
"08-08": { "book": "예레미야", "abbr": "렘", "start": 22, "end": 24 },
"08-09": { "book": "예레미야", "abbr": "렘", "start": 25, "end": 27 },
"08-10": { "book": "예레미야", "abbr": "렘", "start": 28, "end": 30 },
"08-11": { "book": "예레미야", "abbr": "렘", "start": 31, "end": 33 },
"08-12": { "book": "예레미야", "abbr": "렘", "start": 34, "end": 36 },
"08-13": { "book": "예레미야", "abbr": "렘", "start": 37, "end": 39 },
"08-14": { "book": "예레미야", "abbr": "렘", "start": 40, "end": 42 },
"08-15": { "book": "예레미야", "abbr": "렘", "start": 43, "end": 45 },
"08-16": { "book": "예레미야", "abbr": "렘", "start": 46, "end": 48 },
"08-17": { "book": "예레미야", "abbr": "렘", "start": 49, "end": 50 },
"08-18": { "book": "예레미야", "abbr": "렘", "start": 51, "end": 52 },
"08-19": { "book": "예레미야애가", "abbr": "애", "start": 1, "end": 2 },
"08-20": { "book": "예레미야애가", "abbr": "애", "start": 3, "end": 5 },
"08-21": { "book": "에스겔", "abbr": "겔", "start": 1, "end": 3 },
"08-22": { "book": "에스겔", "abbr": "겔", "start": 4, "end": 6 },
"08-23": { "book": "에스겔", "abbr": "겔", "start": 7, "end": 8 },
"08-24": { "book": "에스겔", "abbr": "겔", "start": 9, "end": 10 },
"08-25": { "book": "에스겔", "abbr": "겔", "start": 11, "end": 12 },
"08-26": { "book": "에스겔", "abbr": "겔", "start": 13, "end": 14 },
"08-27": { "book": "에스겔", "abbr": "겔", "start": 15, "end": 16 },
"08-28": { "book": "에스겔", "abbr": "겔", "start": 17, "end": 18 },
"08-29": { "book": "에스겔", "abbr": "겔", "start": 19, "end": 21 },
"08-30": { "book": "에스겔", "abbr": "겔", "start": 22, "end": 24 },
"08-31": { "book": "에스겔", "abbr": "겔", "start": 25, "end": 27 },
"09-01": { "book": "에스겔", "abbr": "겔", "start": 28, "end": 30 },
"09-02": { "book": "에스겔", "abbr": "겔", "start": 31, "end": 33 },
"09-03": { "book": "에스겔", "abbr": "겔", "start": 34, "end": 36 },
"09-04": { "book": "에스겔", "abbr": "겔", "start": 37, "end": 39 },
"09-05": { "book": "에스겔", "abbr": "겔", "start": 40, "end": 41 },
"09-06": { "book": "에스겔", "abbr": "겔", "start": 42, "end": 43 },
"09-07": { "book": "에스겔", "abbr": "겔", "start": 44, "end": 45 },
"09-08": { "book": "에스겔", "abbr": "겔", "start": 46, "end": 48 },
"09-09": { "book": "다니엘", "abbr": "단", "start": 1, "end": 3 },
"09-10": { "book": "다니엘", "abbr": "단", "start": 4, "end": 6 },
"09-11": { "book": "다니엘", "abbr": "단", "start": 7, "end": 9 },
"09-12": { "book": "다니엘", "abbr": "단", "start": 10, "end": 12 },
"09-13": { "book": "호세아", "abbr": "호", "start": 1, "end": 4 },
"09-14": { "book": "호세아", "abbr": "호", "start": 5, "end": 8 },
"09-15": { "book": "호세아", "abbr": "호", "start": 9, "end": 14 },
"09-16": { "book": "요엘", "abbr": "욜", "start": 1, "end": 3 },
"09-17": { "book": "아모스", "abbr": "암", "start": 1, "end": 5 },
"09-18": { "book": "아모스", "abbr": "암", "start": 6, "end": 9 },
"09-19": [ { "book": "오바댜", "abbr": "옵", "start": 1, "end": 1 },
              { "book": "요나", "abbr": "욘", "start": 1, "end": 4 }],
"09-20": { "book": "미가", "abbr": "미", "start": 1, "end": 4 },
"09-21": { "book": "미가", "abbr": "미", "start": 5, "end": 7 },
"09-22": { "book": "나훔", "abbr": "나", "start": 1, "end": 3 },
"09-23": { "book": "하박국", "abbr": "합", "start": 1, "end": 3 },
"09-24": { "book": "스바냐", "abbr": "습", "start": 1, "end": 3 },
"09-25": { "book": "학개", "abbr": "학", "start": 1, "end": 2 },
"09-26": { "book": "스가랴", "abbr": "슥", "start": 1, "end": 4 },
"09-27": { "book": "스가랴", "abbr": "슥", "start": 5, "end": 8 },
"09-28": { "book": "스가랴", "abbr": "슥", "start": 9, "end": 11 },
"09-29": { "book": "스가랴", "abbr": "슥", "start": 12, "end": 14 },
"09-30": { "book": "말라기", "abbr": "말", "start": 1, "end": 4 },
"10-01": { "book": "마태복음", "abbr": "마", "start": 1, "end": 2 },
"10-02": { "book": "마태복음", "abbr": "마", "start": 3, "end": 4 },
"10-03": { "book": "마태복음", "abbr": "마", "start": 5, "end": 6 },
"10-04": { "book": "마태복음", "abbr": "마", "start": 7, "end": 8 },
"10-05": { "book": "마태복음", "abbr": "마", "start": 9, "end": 10 },
"10-06": { "book": "마태복음", "abbr": "마", "start": 11, "end": 12 },
"10-07": { "book": "마태복음", "abbr": "마", "start": 13, "end": 13 },
"10-08": { "book": "마태복음", "abbr": "마", "start": 14, "end": 15 },
"10-09": { "book": "마태복음", "abbr": "마", "start": 16, "end": 17 },
"10-10": { "book": "마태복음", "abbr": "마", "start": 18, "end": 19 },
"10-11": { "book": "마태복음", "abbr": "마", "start": 20, "end": 21 },
"10-12": { "book": "마태복음", "abbr": "마", "start": 22, "end": 23 },
"10-13": { "book": "마태복음", "abbr": "마", "start": 24, "end": 25 },
"10-14": { "book": "마태복음", "abbr": "마", "start": 26, "end": 26 },
"10-15": { "book": "마태복음", "abbr": "마", "start": 27, "end": 28 },
"10-16": { "book": "마가복음", "abbr": "막", "start": 1, "end": 2 },
"10-17": { "book": "마가복음", "abbr": "막", "start": 3, "end": 4 },
"10-18": { "book": "마가복음", "abbr": "막", "start": 5, "end": 6 },
"10-19": { "book": "마가복음", "abbr": "막", "start": 7, "end": 8 },
"10-20": { "book": "마가복음", "abbr": "막", "start": 9, "end": 9 },
"10-21": { "book": "마가복음", "abbr": "막", "start": 10, "end": 10 },
"10-22": { "book": "마가복음", "abbr": "막", "start": 11, "end": 12 },
"10-23": { "book": "마가복음", "abbr": "막", "start": 13, "end": 14 },
"10-24": { "book": "마가복음", "abbr": "막", "start": 15, "end": 16 },
"10-25": { "book": "누가복음", "abbr": "눅", "start": 1, "end": 1 },
"10-26": { "book": "누가복음", "abbr": "눅", "start": 2, "end": 3 },
"10-27": { "book": "누가복음", "abbr": "눅", "start": 4, "end": 5 },
"10-28": { "book": "누가복음", "abbr": "눅", "start": 6, "end": 7 },
"10-29": { "book": "누가복음", "abbr": "눅", "start": 8, "end": 9 },
"10-30": { "book": "누가복음", "abbr": "눅", "start": 10, "end": 11 },
"10-31": { "book": "누가복음", "abbr": "눅", "start": 12, "end": 13 },
"11-01": { "book": "누가복음", "abbr": "눅", "start": 14, "end": 15 },
"11-02": { "book": "누가복음", "abbr": "눅", "start": 16, "end": 17 },
"11-03": { "book": "누가복음", "abbr": "눅", "start": 18, "end": 19 },
"11-04": { "book": "누가복음", "abbr": "눅", "start": 20, "end": 21 },
"11-05": { "book": "누가복음", "abbr": "눅", "start": 22, "end": 23 },
"11-06": { "book": "누가복음", "abbr": "눅", "start": 24, "end": 24 },
"11-07": { "book": "요한복음", "abbr": "요", "start": 1, "end": 2 },
"11-08": { "book": "요한복음", "abbr": "요", "start": 3, "end": 4 },
"11-09": { "book": "요한복음", "abbr": "요", "start": 5, "end": 5 },
"11-10": { "book": "요한복음", "abbr": "요", "start": 6, "end": 6 },
"11-11": { "book": "요한복음", "abbr": "요", "start": 7, "end": 7 },
"11-12": { "book": "요한복음", "abbr": "요", "start": 8, "end": 8 },
"11-13": { "book": "요한복음", "abbr": "요", "start": 9, "end": 10 },
"11-14": { "book": "요한복음", "abbr": "요", "start": 11, "end": 11 },
"11-15": { "book": "요한복음", "abbr": "요", "start": 12, "end": 14 },
"11-16": { "book": "요한복음", "abbr": "요", "start": 15, "end": 18 },
"11-17": { "book": "요한복음", "abbr": "요", "start": 19, "end": 21 },
"11-18": { "book": "사도행전", "abbr": "행", "start": 1, "end": 3 },
"11-19": { "book": "사도행전", "abbr": "행", "start": 4, "end": 6 },
"11-20": { "book": "사도행전", "abbr": "행", "start": 7, "end": 9 },
"11-21": { "book": "사도행전", "abbr": "행", "start": 10, "end": 12 },
"11-22": { "book": "사도행전", "abbr": "행", "start": 13, "end": 16 },
"11-23": { "book": "사도행전", "abbr": "행", "start": 17, "end": 20 },
"11-24": { "book": "사도행전", "abbr": "행", "start": 21, "end": 24 },
"11-25": { "book": "사도행전", "abbr": "행", "start": 25, "end": 28 },
"11-26": { "book": "로마서", "abbr": "롬", "start": 1, "end": 2 },
"11-27": { "book": "로마서", "abbr": "롬", "start": 3, "end": 4 },
"11-28": { "book": "로마서", "abbr": "롬", "start": 5, "end": 8 },
"11-29": { "book": "로마서", "abbr": "롬", "start": 9, "end": 12 },
"11-30": { "book": "로마서", "abbr": "롬", "start": 13, "end": 16 },
"12-01": { "book": "고린도전서", "abbr": "고전", "start": 1, "end": 5 },
"12-02": { "book": "고린도전서", "abbr": "고전", "start": 6, "end": 10 },
"12-03": { "book": "고린도전서", "abbr": "고전", "start": 11, "end": 16 },
"12-04": { "book": "고린도후서", "abbr": "고후", "start": 1, "end": 4 },
"12-05": { "book": "고린도후서", "abbr": "고후", "start": 5, "end": 8 },
"12-06": { "book": "고린도후서", "abbr": "고후", "start": 9, "end": 13 },
"12-07": { "book": "갈라디아서", "abbr": "갈", "start": 1, "end": 6 },
"12-08": { "book": "에베소서", "abbr": "엡", "start": 1, "end": 6 },
"12-09": { "book": "빌립보서", "abbr": "빌", "start": 1, "end": 4 },
"12-10": { "book": "골로새서", "abbr": "골", "start": 1, "end": 4 },
"12-11": { "book": "데살로니가전서", "abbr": "살전", "start": 1, "end": 5 },
"12-12": { "book": "데살로니가후서", "abbr": "살후", "start": 1, "end": 3 },
"12-13": { "book": "디모데전서", "abbr": "딤전", "start": 1, "end": 3 },
"12-14": { "book": "디모데전서", "abbr": "딤전", "start": 4, "end": 6 },
"12-15": { "book": "디모데후서", "abbr": "딤후", "start": 1, "end": 4 },
"12-16": [{ "book": "디도서", "abbr": "딛", "start": 1, "end": 3 },
	{ "book": "빌레몬서", "abbr": "몬", "start": 1, "end": 1 }],
"12-17": { "book": "히브리서", "abbr": "히", "start": 1, "end": 4 },
"12-18": { "book": "히브리서", "abbr": "히", "start": 5, "end": 8 },
"12-19": { "book": "히브리서", "abbr": "히", "start": 9, "end": 13 },
"12-20": { "book": "야고보서", "abbr": "약", "start": 1, "end": 5 },
"12-21": { "book": "베드로전서", "abbr": "벧전", "start": 1, "end": 5 },
"12-22": { "book": "베드로후서", "abbr": "벧후", "start": 1, "end": 3 },
"12-23": { "book": "요한일서", "abbr": "요일", "start": 1, "end": 3 },
"12-24": { "book": "요한일서", "abbr": "요일", "start": 4, "end": 5 },
"12-25":[{ "book": "요한이서", "abbr": "요이", "start": 1, "end": 1 },
	{ "book": "요한삼서", "abbr": "요삼", "start": 1, "end": 1 },
	{ "book": "유다서", "abbr": "유", "start": 1, "end": 1 }],
"12-26": { "book": "요한계시록", "abbr": "계", "start": 1, "end": 4 },
"12-27": { "book": "요한계시록", "abbr": "계", "start": 5, "end": 8 },
"12-28": { "book": "요한계시록", "abbr": "계", "start": 9, "end": 12 },
"12-29": { "book": "요한계시록", "abbr": "계", "start": 13, "end": 16 },
"12-30": { "book": "요한계시록", "abbr": "계", "start": 17, "end": 19 },
"12-31": { "book": "요한계시록", "abbr": "계", "start": 20, "end": 22 },
        };

        let currentActiveDate = ""; // 현재 보고 있는 통독 날짜 키

        // 2. 초기 로드
        window.onload = function() {
            const now = new Date();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            document.getElementById('calendar-month').value = month;
            loadToday();
        };

        function loadToday() {
            const now = new Date();
            const dateKey = `${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;
            currentActiveDate = dateKey;
            fetchBibleData(dateKey);
        }

        async function fetchBibleData(dateKey) {
            const plan = planData[dateKey];
            if (!plan) {
                document.getElementById('header-title').innerText = "일정이 없습니다.";
                return;
            }
            document.getElementById('header-date').innerText = dateKey + " 통독 분량";
            await renderBibleText(plan.book, plan.abbr, plan.start, plan.end);
            updateUIState(dateKey);
        }

        async function loadManual() {
            const b = document.getElementById('book-select');
            const c = document.getElementById('chapter-select');
            const book = b.value;
            const ch = parseInt(c.value);
            const abbr = b.options[b.selectedIndex].dataset.abbr;

            if (!book || !ch) return alert("성경과 장을 선택하세요.");
            
            currentActiveDate = ""; // 수동 모드는 날짜 체크 해제
            document.getElementById('header-date').innerText = "자유 읽기";
            await renderBibleText(book, abbr, ch, ch);
            updateUIState(null);
        }

        // 3. 본문 렌더링 핵심 로직
        async function renderBibleText(book, abbr, start, end) {
            const viewer = document.getElementById('bible-viewer');
            document.getElementById('header-title').innerText = `${book} ${start}${start==end?'':'-'+end}장`;
            viewer.innerHTML = "<p class='text-center py-20 text-slate-400 animate-pulse'>불러오는 중...</p>";

            try {
                const res = await fetch(`./${book}.txt`);
                if (!res.ok) throw new Error("File Missing");

                // 기존: const text = await res.text(); (이 줄을 지우고 아래 3줄을 넣으세요)
		const arrayBuffer = await res.arrayBuffer();
		const decoder = new TextDecoder('euc-kr'); // 한국어 ANSI(EUC-KR) 전용 디코더
		const text = decoder.decode(arrayBuffer);
	console.log("파일 내용 첫 20글자:", text.substring(0, 20));
                const lines = text.split(/\r?\n/);
                let html = "";
                let curCh = -1;
                const regex = new RegExp(`^${abbr}\\s*(\\d+)[:\\s]+(\\d+)\\s+(.*)`);

                lines.forEach(line => {
                    const m = line.trim().match(regex);
                    if (m) {
                        const ch = parseInt(m[1]), vs = m[2], txt = m[3];
                        if (ch >= start && ch <= end) {
                            if (curCh !== ch) {
                                html += `<div class="chapter-head">${ch}장</div>`;
                                curCh = ch;
                            }
                            html += `<p class="mb-4"><span class="verse-num">${vs}</span>${txt}</p>`;
                        }
                    }
                });
                viewer.innerHTML = html || "<p class='text-center py-20 text-slate-400'>본문 내용이 없습니다.</p>";
                viewer.scrollTop = 0;
            } catch (e) {
                viewer.innerHTML = `<p class='text-red-500 text-center py-20'>${book}.txt 파일을 읽을 수 없습니다.</p>`;
            }
        }

        // 4. UI 및 달력 로직
        function toggleCalendar() {
            const v = document.getElementById('calendar-view');
            v.classList.toggle('hidden');
            if (!v.classList.contains('hidden')) renderCalendar();
        }

        function renderCalendar() {
            const month = document.getElementById('calendar-month').value;
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = "";
            const lastDay = new Date(2026, parseInt(month), 0).getDate();

            for (let d = 1; d <= lastDay; d++) {
                const key = `${month}-${String(d).padStart(2, '0')}`;
                const isRead = localStorage.getItem(`read-${key}`) === 'true';
                const btn = document.createElement('button');
                btn.innerText = d;
                btn.className = `aspect-square text-xs rounded border ${isRead ? 'calendar-day read' : 'bg-white text-slate-400 border-slate-100'}`;
                btn.onclick = () => { currentActiveDate = key; fetchBibleData(key); };
                grid.appendChild(btn);
            }
        }

        function toggleReadStatus() {
            if (!currentActiveDate) return alert("통독 모드에서만 체크 가능합니다.");
            const status = localStorage.getItem(`read-${currentActiveDate}`) === 'true';
            localStorage.setItem(`read-${currentActiveDate}`, !status);
            updateUIState(currentActiveDate);
            renderCalendar();
        }

        function updateUIState(dateKey) {
            const badge = document.getElementById('header-status');
            const btn = document.getElementById('read-btn');
            const isRead = dateKey && localStorage.getItem(`read-${dateKey}`) === 'true';

            if (isRead) {
                badge.innerText = "읽음 완료";
                badge.className = "px-2 py-0.5 rounded-full bg-green-500 text-white text-xs";
                btn.innerText = "다시 읽기 (완료됨)";
                btn.className = "w-full py-4 rounded-2xl font-bold text-white shadow-lg bg-green-600";
            } else {
                badge.innerText = dateKey ? "미독" : "자유 모드";
                badge.className = "px-2 py-0.5 rounded-full bg-slate-200 text-slate-600 text-xs";
                btn.innerText = "오늘의 읽기 완료";
                btn.className = "w-full py-4 rounded-2xl font-bold text-white shadow-lg bg-blue-600";
            }
            let readCount = 0;
            for (let i=0; i<localStorage.length; i++) {
                if (localStorage.key(i).startsWith('read-') && localStorage.getItem(localStorage.key(i)) === 'true') readCount++;
            }
            document.getElementById('header-progress').style.width = (readCount / 365 * 100) + "%";
        }

        function updateChapterList() {
            const b = document.getElementById('book-select');
            const c = document.getElementById('chapter-select');
            const max = b.options[b.selectedIndex].dataset.max;
            c.innerHTML = '<option value="">장</option>';
            if (max) for (let i = 1; i <= max; i++) c.innerHTML += `<option value="${i}">${i}장</option>`;
        }
	let currentFontSize = 18; // 기본 크기

function changeFontSize(delta) {
    currentFontSize += delta;
    // 최소 14px, 최대 30px로 제한
    if (currentFontSize < 14) currentFontSize = 14;
    if (currentFontSize > 30) currentFontSize = 30;
    
    document.getElementById('bible-viewer').style.fontSize = currentFontSize + 'px';
    // 설정 저장 (나중에도 유지되도록)
    localStorage.setItem('bible-font-size', currentFontSize);
}

// 페이지 로드 시 저장된 크기 불러오기 (window.onload 안에 추가)
const savedSize = localStorage.getItem('bible-font-size');
if (savedSize) {
    currentFontSize = parseInt(savedSize);
    document.getElementById('bible-viewer').style.fontSize = currentFontSize + 'px';
}
    </script>
</body>